<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªä½œPCãƒ‘ãƒ¼ãƒ„é¸å®šã‚¢ãƒ—ãƒª</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
        .container{max-width:1200px;margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden}
        .header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:30px;text-align:center}
        .header h1{font-size:2.5em;margin-bottom:10px}
        .content{padding:30px}
        .part-section{margin-bottom:25px;border:2px solid #e0e0e0;border-radius:12px;padding:20px;transition:all .3s}
        .part-section:hover{border-color:#667eea;box-shadow:0 5px 15px rgba(102,126,234,.2)}
        .part-header{display:flex;align-items:center;margin-bottom:15px}
        .part-icon{font-size:1.8em;margin-right:12px}
        .part-title{font-size:1.3em;font-weight:bold;color:#333}
        .input-group{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:10px}
        .input-field{display:flex;flex-direction:column}
        .input-field label{font-size:.9em;color:#666;margin-bottom:5px;font-weight:500}
        .input-field input,.input-field select,.input-field textarea{padding:10px;border:2px solid #e0e0e0;border-radius:8px;font-size:1em;transition:border-color .3s}
        .input-field input:focus,.input-field select:focus,.input-field textarea:focus{outline:none;border-color:#667eea}
        .input-field textarea{resize:vertical;min-height:60px}
        .btn-auto-search{background:linear-gradient(135deg,#ff6b6b 0%,#ee5a6f 100%);color:#fff;padding:12px 20px;border:none;border-radius:8px;font-size:.95em;font-weight:bold;cursor:pointer;transition:all .3s;margin-top:8px;box-shadow:0 4px 15px rgba(255,107,107,.3);width:100%}
        .btn-auto-search:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(255,107,107,.4)}
        .btn-auto-search:disabled{background:linear-gradient(135deg,#95a5a6 0%,#7f8c8d 100%);cursor:not-allowed;opacity:.7}
        .status-message{border-radius:8px;padding:12px;margin:12px 0;font-size:.9em;animation:slideIn .3s}
        .status-message.success{background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%);border:2px solid #4caf50;color:#2e7d32}
        .status-message.error{background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);border:2px solid #f44336;color:#c62828}
        .status-message.loading{background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border:2px solid #2196f3;color:#1565c0}
        @keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
        .auto-filled{background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%)!important;border-color:#4caf50!important;animation:fillHighlight .5s}
        @keyframes fillHighlight{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}
        .image-preview{margin-top:15px;border:2px solid #e0e0e0;border-radius:8px;overflow:hidden;background:#f5f5f5}
        .image-preview img{width:100%;height:250px;object-fit:contain;padding:15px;background:#fff}
        .summary-section{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-radius:12px;padding:25px;margin-top:30px}
        .summary-header{font-size:1.8em;font-weight:bold;color:#333;margin-bottom:20px;text-align:center}
        .summary-item{display:grid;grid-template-columns:150px 1fr 120px;gap:15px;padding:12px;background:#fff;border-radius:8px;margin-bottom:10px;align-items:center}
        .summary-category{font-weight:bold;color:#667eea}
        .summary-price{text-align:right;font-weight:bold;color:#2ecc71}
        .total-section{background:#fff;border-radius:8px;padding:20px;margin-top:20px;text-align:right}
        .total-label{font-size:1.3em;color:#333;margin-right:15px}
        .total-amount{font-size:2em;font-weight:bold;color:#667eea}
        .button-group{display:flex;gap:15px;margin-top:25px;justify-content:center}
        .btn{padding:15px 40px;border:none;border-radius:10px;font-size:1.1em;font-weight:bold;cursor:pointer;transition:all .3s}
        .btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
        .btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(102,126,234,.3)}
        .btn-secondary{background:#e0e0e0;color:#333}
        .btn-secondary:hover{background:#d0d0d0}
        .warning{background:#fff3cd;border:2px solid #ffc107;border-radius:8px;padding:15px;margin-top:15px;color:#856404}
        .warning-title{font-weight:bold;margin-bottom:8px}
        @media (max-width:768px){.input-group,.summary-item{grid-template-columns:1fr;gap:8px}.summary-price{text-align:left}}
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const {useState,useEffect}=React;
        const KEY='pc-parts-data';
        const priceDB={
            'i7-14700k':{price:'65000',socket:'LGA1700',tdp:'125'},
            'i5-14600k':{price:'45000',socket:'LGA1700',tdp:'125'},
            'i9-14900k':{price:'88000',socket:'LGA1700',tdp:'125'},
            'ryzen 7 7800x3d':{price:'58000',socket:'AM5',tdp:'120'},
            'ryzen 9 7950x':{price:'85000',socket:'AM5',tdp:'170'},
            'ryzen 5 7600x':{price:'38000',socket:'AM5',tdp:'105'},
            'rtx 4060':{price:'45000',power:'170'},
            'rtx 4060 ti':{price:'65000',power:'165'},
            'rtx 4070':{price:'85000',power:'200'},
            'rtx 4070 ti':{price:'110000',power:'285'},
            'rtx 4080':{price:'160000',power:'320'},
            'rtx 4090':{price:'280000',power:'450'},
            'rx 7800 xt':{price:'75000',power:'263'},
            'rx 7900 xt':{price:'105000',power:'300'},
            'rx 7900 xtx':{price:'135000',power:'355'}
        };

        const initParts={
            cpu:{name:'',price:'',socket:'',tdp:'',notes:'',image:''},
            motherboard:{name:'',price:'',socket:'',chipset:'',formFactor:'',notes:'',image:''},
            memory:{name:'',price:'',type:'',speed:'',capacity:'',notes:'',image:''},
            gpu:{name:'',price:'',power:'',notes:'',image:''},
            storage:{name:'',price:'',type:'',capacity:'',notes:'',image:''},
            psu:{name:'',price:'',wattage:'',certification:'',notes:'',image:''},
            case:{name:'',price:'',formFactor:'',notes:'',image:''},
            cooler:{name:'',price:'',type:'',notes:'',image:''},
            os:{name:'',price:'',edition:'',license:'',notes:'',image:''}
        };

        function PCPartsSelector(){
            const load=()=>{try{const d=localStorage.getItem(KEY);return d?JSON.parse(d):initParts}catch(e){return initParts}};
            const [parts,setParts]=useState(load);
            const [warnings,setWarnings]=useState([]);
            const [statusMsg,setStatusMsg]=useState({});
            const [autoFilled,setAutoFilled]=useState({});

            useEffect(()=>{try{localStorage.setItem(KEY,JSON.stringify(parts))}catch(e){}}, [parts]);

            const update=(cat,field,val)=>setParts(p=>({...p,[cat]:{...p[cat],[field]:val}}));

            const searchPrice=name=>{
                const ln=name.toLowerCase();
                for(const [k,d] of Object.entries(priceDB))
                    if(ln.includes(k)||k.includes(ln.replace(/\s+/g,' ')))return d;
                return null;
            };

            const extractSpecs=(name,cat)=>{
                const s={},u=name.toUpperCase();
                if(cat==='cpu'){
                    const sm=name.match(/(LGA\d+|AM\d+|AM5)/i);if(sm)s.socket=sm[1].toUpperCase();
                    const tm=name.match(/(\d+)W|TDP[:\s]*(\d+)/i);if(tm)s.tdp=tm[1]||tm[2];
                }else if(cat==='motherboard'){
                    const sm=name.match(/(LGA\d+|AM\d+|AM5)/i);if(sm)s.socket=sm[1].toUpperCase();
                    const cm=name.match(/(Z\d+|B\d+|H\d+|X\d+)/i);if(cm)s.chipset=cm[1].toUpperCase();
                    if(u.includes('MINI-ITX')||u.includes('MINI ITX'))s.formFactor='Mini-ITX';
                    else if(u.includes('MICRO-ATX')||u.includes('M-ATX')||u.includes('MATX'))s.formFactor='Micro-ATX';
                    else if(u.includes('E-ATX')||u.includes('EATX'))s.formFactor='E-ATX';
                    else if(u.includes('ATX'))s.formFactor='ATX';
                }else if(cat==='memory'){
                    if(u.includes('DDR5'))s.type='DDR5';else if(u.includes('DDR4'))s.type='DDR4';
                    const sm=name.match(/(\d{4,5})\s*MHz/i);if(sm)s.speed=sm[1]+'MHz';
                    const cm=name.match(/(\d+)\s*GB/i);if(cm)s.capacity=cm[1]+'GB';
                }else if(cat==='gpu'){
                    const pm=name.match(/(\d{2,3})\s*W/i);if(pm)s.power=pm[1];
                }else if(cat==='storage'){
                    if(u.includes('NVME')||u.includes('M.2'))s.type='M.2 NVMe SSD';
                    else if(u.includes('SATA')&&u.includes('SSD'))s.type='SATA SSD';
                    else if(u.includes('HDD'))s.type='HDD';
                    else if(u.includes('SSD'))s.type='M.2 NVMe SSD';
                    const cm=name.match(/(\d+)\s*(TB|GB)/i);if(cm)s.capacity=cm[1]+cm[2].toUpperCase();
                }else if(cat==='psu'){
                    const wm=name.match(/(\d{3,4})\s*W/i);if(wm)s.wattage=wm[1];
                    if(/Titanium/i.test(name))s.certification='80 PLUS Titanium';
                    else if(/Platinum/i.test(name))s.certification='80 PLUS Platinum';
                    else if(/Gold/i.test(name))s.certification='80 PLUS Gold';
                    else if(/Silver/i.test(name))s.certification='80 PLUS Silver';
                    else if(/Bronze/i.test(name))s.certification='80 PLUS Bronze';
                }else if(cat==='cooler'){
                    if(/æ°´å†·/.test(name))s.type=/ç°¡æ˜“/i.test(name)?'ç°¡æ˜“æ°´å†·':'æœ¬æ ¼æ°´å†·';
                    else if(/ç©ºå†·|air|tower/i.test(name))s.type='ç©ºå†·';
                }else if(cat==='os'){
                    if(/Pro/i.test(name))s.edition='Pro';else if(/Home/i.test(name))s.edition='Home';
                    if(/DSP|OEM/i.test(name))s.license='DSPç‰ˆ';
                    else if(/ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸|retail/i.test(name))s.license='ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç‰ˆ';
                    else if(/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰|download/i.test(name))s.license='ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç‰ˆ';
                }
                return s;
            };

            const autoSearch=async cat=>{
                const name=parts[cat].name;
                if(!name||name.trim().length<3){
                    setStatusMsg(p=>({...p,[cat]:{type:'error',text:'è£½å“åã‚’3æ–‡å­—ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„'}}));
                    setTimeout(()=>setStatusMsg(p=>({...p,[cat]:null})),3000);
                    return;
                }
                setStatusMsg(p=>({...p,[cat]:{type:'loading',text:'ğŸ” ä¾¡æ ¼.comã‹ã‚‰æœ€å®‰å€¤ã‚’è‡ªå‹•å–å¾—ä¸­...'}}));

                try{
                    const res=await fetch('http://localhost:5000/api/search',{
                        method:'POST',
                        headers:{'Content-Type':'application/json'},
                        body:JSON.stringify({productName:name,category:cat})
                    });
                    let api=res.ok?await res.json():{};
                    const pd=searchPrice(name);
                    const es=extractSpecs(name,cat);
                    const upd=[];

                    if(api.price){update(cat,'price',api.price);upd.push('price');}
                    else if(pd?.price){update(cat,'price',pd.price);upd.push('price');}

                    ['socket','chipset','formFactor','type','speed','capacity','power','wattage','certification','tdp','edition','license']
                        .forEach(f=>{if(api[f]){update(cat,f,api[f]);if(!upd.includes(f))upd.push(f);}});

                    if(pd)Object.entries(pd).forEach(([f,v])=>{if(f!=='price'&&v){update(cat,f,v);if(!upd.includes(f))upd.push(f);}});
                    Object.entries(es).forEach(([f,v])=>{if(v){update(cat,f,v);if(!upd.includes(f))upd.push(f);}});

                    if(api.image){update(cat,'image',api.image);upd.push('image');}
                    else if(!parts[cat].image){
                        const imgs={cpu:'https://via.placeholder.com/400x300/667eea/ffffff?text=CPU',
                            motherboard:'https://via.placeholder.com/400x300/764ba2/ffffff?text=Motherboard',
                            memory:'https://via.placeholder.com/400x300/2ecc71/ffffff?text=RAM',
                            gpu:'https://via.placeholder.com/400x300/e74c3c/ffffff?text=GPU',
                            storage:'https://via.placeholder.com/400x300/3498db/ffffff?text=Storage',
                            psu:'https://via.placeholder.com/400x300/f39c12/ffffff?text=PSU',
                            case:'https://via.placeholder.com/400x300/9b59b6/ffffff?text=Case',
                            cooler:'https://via.placeholder.com/400x300/1abc9c/ffffff?text=Cooler',
                            os:'https://via.placeholder.com/400x300/3498db/ffffff?text=Windows'};
                        update(cat,'image',imgs[cat]);upd.push('image');
                    }

                    if(upd.length>0){
                        setAutoFilled(p=>({...p,[cat]:upd}));
                        setTimeout(()=>setAutoFilled(p=>({...p,[cat]:[]})),3000);
                        const msg=upd.includes('price')?
                            `âœ… ${api.source||'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹'}ã‹ã‚‰æœ€å®‰å€¤ï¿¥${parts[cat].price||api.price}ã‚’å«ã‚€${upd.length}å€‹ã®é …ç›®ã‚’è‡ªå‹•å–å¾—ã—ã¾ã—ãŸï¼`:
                            `âœ… ${upd.length}å€‹ã®ã‚¹ãƒšãƒƒã‚¯é …ç›®ã‚’è‡ªå‹•å…¥åŠ›ã—ã¾ã—ãŸã€‚`;
                        setStatusMsg(p=>({...p,[cat]:{type:'success',text:msg}}));
                    }else setStatusMsg(p=>({...p,[cat]:{type:'error',text:'ğŸ’¡ ä¾¡æ ¼.comã§å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚'}}));
                    setTimeout(()=>setStatusMsg(p=>({...p,[cat]:null})),8000);
                }catch(err){
                    const pd=searchPrice(name);
                    const es=extractSpecs(name,cat);
                    const upd=[];
                    if(pd)Object.entries(pd).forEach(([f,v])=>{if(v){update(cat,f,v);upd.push(f);}});
                    Object.entries(es).forEach(([f,v])=>{if(v){update(cat,f,v);if(!upd.includes(f))upd.push(f);}});
                    if(upd.length>0){setAutoFilled(p=>({...p,[cat]:upd}));setTimeout(()=>setAutoFilled(p=>({...p,[cat]:[]})),3000);}
                    setStatusMsg(p=>({...p,[cat]:{type:'error',text:'âš ï¸ è‡ªå‹•å–å¾—ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ãã¾ã›ã‚“ã§ã—ãŸã€‚'}}));
                    setTimeout(()=>setStatusMsg(p=>({...p,[cat]:null})),8000);
                }
            };

            const calcTotal=()=>Object.values(parts).reduce((s,p)=>s+(parseFloat(p.price)||0),0);

            const checkCompat=()=>{
                const w=[];
                if(parts.cpu.socket&&parts.motherboard.socket&&parts.cpu.socket!==parts.motherboard.socket)
                    w.push('âš ï¸ CPUã¨ãƒã‚¶ãƒ¼ãƒœãƒ¼ãƒ‰ã®ã‚½ã‚±ãƒƒãƒˆãŒä¸€è‡´ã—ã¾ã›ã‚“');
                if(parts.case.formFactor&&parts.motherboard.formFactor){
                    const cs=parts.case.formFactor.toLowerCase(),ms=parts.motherboard.formFactor.toLowerCase();
                    if(cs.includes('mini')&&!ms.includes('mini')&&!ms.includes('micro'))
                        w.push('âš ï¸ ã‚±ãƒ¼ã‚¹ã®ã‚µã‚¤ã‚ºã«å¯¾ã—ã¦ãƒã‚¶ãƒ¼ãƒœãƒ¼ãƒ‰ãŒå¤§ãã™ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                }
                const tdp=parseFloat(parts.cpu.tdp)||0,gpu=parseFloat(parts.gpu.power)||0,psu=parseFloat(parts.psu.wattage)||0;
                const est=tdp+gpu+150;
                if(psu>0&&est>psu*.8)w.push(`âš ï¸ é›»æºå®¹é‡ãŒä¸è¶³ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆæ¨å®š: ${est}Wï¼‰`);
                setWarnings(w);
            };

            useEffect(()=>checkCompat(),[parts]);

            const exportTxt=()=>{
                let t='=== è‡ªä½œPCãƒ‘ãƒ¼ãƒ„ãƒªã‚¹ãƒˆ ===\n\n';
                const cats={cpu:'CPU',motherboard:'ãƒã‚¶ãƒ¼ãƒœãƒ¼ãƒ‰',memory:'ãƒ¡ãƒ¢ãƒª',gpu:'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒœãƒ¼ãƒ‰',
                    storage:'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸',psu:'é›»æºãƒ¦ãƒ‹ãƒƒãƒˆ',case:'PCã‚±ãƒ¼ã‚¹',cooler:'CPUã‚¯ãƒ¼ãƒ©ãƒ¼',os:'OS'};
                Object.entries(cats).forEach(([k,l])=>{
                    const p=parts[k];
                    if(p.name){
                        t+=`ã€${l}ã€‘\nã€€è£½å“å: ${p.name}\n`;
                        if(p.price)t+=`ã€€ä¾¡æ ¼: Â¥${parseFloat(p.price).toLocaleString()}\n`;
                        if(k==='cpu'&&p.socket)t+=`ã€€ã‚½ã‚±ãƒƒãƒˆ: ${p.socket}\n`;
                        if(k==='cpu'&&p.tdp)t+=`ã€€TDP: ${p.tdp}W\n`;
                        if(k==='motherboard'&&p.socket)t+=`ã€€ã‚½ã‚±ãƒƒãƒˆ: ${p.socket}\n`;
                        if(k==='motherboard'&&p.chipset)t+=`ã€€ãƒãƒƒãƒ—ã‚»ãƒƒãƒˆ: ${p.chipset}\n`;
                        if(k==='memory'&&p.type)t+=`ã€€ã‚¿ã‚¤ãƒ—: ${p.type}\n`;
                        if(k==='memory'&&p.capacity)t+=`ã€€å®¹é‡: ${p.capacity}\n`;
                        if(k==='gpu'&&p.power)t+=`ã€€æ¶ˆè²»é›»åŠ›: ${p.power}W\n`;
                        if(k==='psu'&&p.wattage)t+=`ã€€å®¹é‡: ${p.wattage}W\n`;
                        if(k==='os'&&p.edition)t+=`ã€€ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³: ${p.edition}\n`;
                        if(k==='os'&&p.license)t+=`ã€€ãƒ©ã‚¤ã‚»ãƒ³ã‚¹: ${p.license}\n`;
                        if(p.image)t+=`ã€€ç”»åƒURL: ${p.image}\n`;
                        if(p.notes)t+=`ã€€ãƒ¡ãƒ¢: ${p.notes}\n`;
                        t+='\n';
                    }
                });
                t+=`\nåˆè¨ˆé‡‘é¡: Â¥${calcTotal().toLocaleString()}\n`;
                if(warnings.length>0){t+='\nã€äº’æ›æ€§ã®è­¦å‘Šã€‘\n';warnings.forEach(w=>t+=`${w}\n`);}
                const b=new Blob([t],{type:'text/plain;charset=utf-8'});
                const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='pc-parts-list.txt';a.click();
            };

            const clearAll=()=>{
                if(confirm('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')){
                    try{localStorage.removeItem(KEY)}catch(e){}
                    setParts(initParts);setStatusMsg({});setAutoFilled({});
                }
            };

            const isFilled=(cat,f)=>autoFilled[cat]?.includes(f);

            const renderPart=(cat,icon,title,{namePlaceholder,extraFields})=>{
                const p=parts[cat],st=statusMsg[cat];
                return(
                    <div className="part-section">
                        <div className="part-header"><span className="part-icon">{icon}</span><span className="part-title">{title}</span></div>
                        <div className="input-group">
                            <div className="input-field">
                                <label>è£½å“åãƒ»å‹ç•ª</label>
                                <input type="text" placeholder={`ä¾‹: ${namePlaceholder}`} value={p.name}
                                    onChange={e=>update(cat,'name',e.target.value)}
                                    onKeyDown={e=>{if(e.key==='Enter'&&st?.type!=='loading')autoSearch(cat)}}/>
                                <button className="btn-auto-search" onClick={()=>autoSearch(cat)} disabled={st?.type==='loading'}>
                                    {st?.type==='loading'?'ğŸ” æ¤œç´¢ä¸­...':'ğŸ·ï¸ ä¾¡æ ¼.comæ¤œç´¢ï¼†è‡ªå‹•å…¥åŠ›'}
                                </button>
                            </div>
                            <div className="input-field">
                                <label>ä¾¡æ ¼ï¼ˆå††ï¼‰</label>
                                <input type="text" placeholder="ä¾¡æ ¼.comã‹ã‚‰è‡ªå‹•å–å¾—" value={p.price?`Â¥${parseFloat(p.price).toLocaleString()}`:''}
                                    readOnly className={isFilled(cat,'price')?'auto-filled':''} style={{cursor:'default',backgroundColor:'#f5f5f5'}}/>
                            </div>
                            {extraFields&&extraFields(p,update,cat,isFilled)}
                        </div>
                        {st&&<div className={`status-message ${st.type}`}>{st.text}</div>}
                        {p.image&&<div className="image-preview"><img src={p.image} alt={p.name||title}
                            onError={e=>{e.target.style.display='none';e.target.parentElement.innerHTML='<div style="padding:50px;text-align:center;color:#999">ç”»åƒã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ</div>';}}/></div>}
                        <div className="input-field" style={{marginTop:'10px'}}>
                            <label>ãƒ¡ãƒ¢</label>
                            <textarea placeholder="å‚™è€ƒã‚„URLç­‰" value={p.notes} onChange={e=>update(cat,'notes',e.target.value)}/>
                        </div>
                    </div>
                );
            };

            const partConfigs=[
                ['cpu','ğŸ”²','CPU',{namePlaceholder:'Core i7-14700K',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>ã‚½ã‚±ãƒƒãƒˆ</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.socket} onChange={e=>u(c,'socket',e.target.value)} className={f(c,'socket')?'auto-filled':''}/></div>
                    <div className="input-field"><label>TDPï¼ˆWï¼‰</label><input type="number" placeholder="è‡ªå‹•å…¥åŠ›" value={p.tdp} onChange={e=>u(c,'tdp',e.target.value)} className={f(c,'tdp')?'auto-filled':''}/></div></>
                )}],
                ['motherboard','ğŸ”Œ','ãƒã‚¶ãƒ¼ãƒœãƒ¼ãƒ‰',{namePlaceholder:'ASUS ROG STRIX Z790-E ATX',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>ã‚½ã‚±ãƒƒãƒˆ</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.socket} onChange={e=>u(c,'socket',e.target.value)} className={f(c,'socket')?'auto-filled':''}/></div>
                    <div className="input-field"><label>ãƒãƒƒãƒ—ã‚»ãƒƒãƒˆ</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.chipset} onChange={e=>u(c,'chipset',e.target.value)} className={f(c,'chipset')?'auto-filled':''}/></div>
                    <div className="input-field"><label>ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼</label><select value={p.formFactor} onChange={e=>u(c,'formFactor',e.target.value)} className={f(c,'formFactor')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="ATX">ATX</option><option value="Micro-ATX">Micro-ATX</option><option value="Mini-ITX">Mini-ITX</option><option value="E-ATX">E-ATX</option></select></div></>
                )}],
                ['memory','ğŸ’¾','ãƒ¡ãƒ¢ãƒª',{namePlaceholder:'Corsair Vengeance DDR5 32GB 6000MHz',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>ã‚¿ã‚¤ãƒ—</label><select value={p.type} onChange={e=>u(c,'type',e.target.value)} className={f(c,'type')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="DDR5">DDR5</option><option value="DDR4">DDR4</option></select></div>
                    <div className="input-field"><label>é€Ÿåº¦</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.speed} onChange={e=>u(c,'speed',e.target.value)} className={f(c,'speed')?'auto-filled':''}/></div>
                    <div className="input-field"><label>å®¹é‡</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.capacity} onChange={e=>u(c,'capacity',e.target.value)} className={f(c,'capacity')?'auto-filled':''}/></div></>
                )}],
                ['gpu','ğŸ®','ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒœãƒ¼ãƒ‰',{namePlaceholder:'NVIDIA GeForce RTX 4070 Ti',extraFields:(p,u,c,f)=>(
                    <div className="input-field"><label>æ¶ˆè²»é›»åŠ›ï¼ˆWï¼‰</label><input type="number" placeholder="è‡ªå‹•å…¥åŠ›" value={p.power} onChange={e=>u(c,'power',e.target.value)} className={f(c,'power')?'auto-filled':''}/></div>
                )}],
                ['storage','ğŸ’¿','ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸',{namePlaceholder:'Samsung 980 PRO 1TB NVMe SSD',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>ã‚¿ã‚¤ãƒ—</label><select value={p.type} onChange={e=>u(c,'type',e.target.value)} className={f(c,'type')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="M.2 NVMe SSD">M.2 NVMe SSD</option><option value="SATA SSD">SATA SSD</option><option value="HDD">HDD</option></select></div>
                    <div className="input-field"><label>å®¹é‡</label><input type="text" placeholder="è‡ªå‹•å…¥åŠ›" value={p.capacity} onChange={e=>u(c,'capacity',e.target.value)} className={f(c,'capacity')?'auto-filled':''}/></div></>
                )}],
                ['psu','âš¡','é›»æºãƒ¦ãƒ‹ãƒƒãƒˆ',{namePlaceholder:'Corsair RM850x 850W Gold',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>å®¹é‡ï¼ˆWï¼‰</label><input type="number" placeholder="è‡ªå‹•å…¥åŠ›" value={p.wattage} onChange={e=>u(c,'wattage',e.target.value)} className={f(c,'wattage')?'auto-filled':''}/></div>
                    <div className="input-field"><label>èªè¨¼</label><select value={p.certification} onChange={e=>u(c,'certification',e.target.value)} className={f(c,'certification')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="80 PLUS Titanium">80 PLUS Titanium</option><option value="80 PLUS Platinum">80 PLUS Platinum</option>
                        <option value="80 PLUS Gold">80 PLUS Gold</option><option value="80 PLUS Silver">80 PLUS Silver</option><option value="80 PLUS Bronze">80 PLUS Bronze</option></select></div></>
                )}],
                ['case','ğŸ“¦','PCã‚±ãƒ¼ã‚¹',{namePlaceholder:'NZXT H7 Flow Mid Tower ATX',extraFields:(p,u,c,f)=>(
                    <div className="input-field"><label>å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼</label><select value={p.formFactor} onChange={e=>u(c,'formFactor',e.target.value)} className={f(c,'formFactor')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="Full Tower">Full Tower (ATX/E-ATXå¯¾å¿œ)</option><option value="Mid Tower">Mid Tower (ATXå¯¾å¿œ)</option>
                        <option value="Mini Tower">Mini Tower (Micro-ATXå¯¾å¿œ)</option><option value="Small Form Factor">Small Form Factor (Mini-ITXå¯¾å¿œ)</option></select></div>
                )}],
                ['cooler','â„ï¸','CPUã‚¯ãƒ¼ãƒ©ãƒ¼',{namePlaceholder:'Noctua NH-D15 ç©ºå†·',extraFields:(p,u,c,f)=>(
                    <div className="input-field"><label>ã‚¿ã‚¤ãƒ—</label><select value={p.type} onChange={e=>u(c,'type',e.target.value)} className={f(c,'type')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="ç©ºå†·">ç©ºå†·</option><option value="ç°¡æ˜“æ°´å†·">ç°¡æ˜“æ°´å†·</option><option value="æœ¬æ ¼æ°´å†·">æœ¬æ ¼æ°´å†·</option></select></div>
                )}],
                ['os','ğŸ’»','OS',{namePlaceholder:'Windows 11 Home DSPç‰ˆ',extraFields:(p,u,c,f)=>(
                    <><div className="input-field"><label>ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³</label><select value={p.edition} onChange={e=>u(c,'edition',e.target.value)} className={f(c,'edition')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="Home">Home</option><option value="Pro">Pro</option></select></div>
                    <div className="input-field"><label>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ç¨®é¡</label><select value={p.license} onChange={e=>u(c,'license',e.target.value)} className={f(c,'license')?'auto-filled':''}>
                        <option value="">é¸æŠ</option><option value="DSPç‰ˆ">DSPç‰ˆ</option><option value="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç‰ˆ">ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç‰ˆ</option><option value="ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç‰ˆ">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç‰ˆ</option></select></div></>
                )}]
            ];

            return(
                <div className="container">
                    <div className="header"><h1>ğŸ–¥ï¸ è‡ªä½œPCãƒ‘ãƒ¼ãƒ„é¸å®šã‚¢ãƒ—ãƒª</h1><p>ğŸ·ï¸ å‹ç•ªå…¥åŠ›â†’ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯â†’ä¾¡æ ¼.comæœ€å®‰å€¤ã‚’è‡ªå‹•å–å¾—ï¼</p></div>
                    <div className="content">
                        {partConfigs.map(([cat,icon,title,cfg])=>renderPart(cat,icon,title,cfg))}
                        {warnings.length>0&&<div className="warning"><div className="warning-title">âš ï¸ äº’æ›æ€§ã®ç¢ºèªãŒå¿…è¦ã§ã™</div>{warnings.map((w,i)=><div key={i}>{w}</div>)}</div>}
                        <div className="summary-section">
                            <div className="summary-header">ğŸ“‹ ãƒ‘ãƒ¼ãƒ„ä¸€è¦§</div>
                            {Object.entries({cpu:'CPU',motherboard:'ãƒã‚¶ãƒ¼ãƒœãƒ¼ãƒ‰',memory:'ãƒ¡ãƒ¢ãƒª',gpu:'GPU',storage:'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸',psu:'é›»æº',case:'ã‚±ãƒ¼ã‚¹',cooler:'ã‚¯ãƒ¼ãƒ©ãƒ¼',os:'OS'})
                                .map(([k,l])=>parts[k].name&&<div key={k} className="summary-item"><div className="summary-category">{l}</div>
                                <div className="summary-name">{parts[k].name}</div><div className="summary-price">{parts[k].price?`Â¥${parseFloat(parts[k].price).toLocaleString()}`:'-'}</div></div>)}
                            <div className="total-section"><span className="total-label">åˆè¨ˆé‡‘é¡:</span><span className="total-amount">Â¥{calcTotal().toLocaleString()}</span></div>
                        </div>
                        <div className="button-group">
                            <button className="btn btn-primary" onClick={exportTxt}>ğŸ’¾ ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ä¿å­˜</button>
                            <button className="btn btn-secondary" onClick={clearAll}>ğŸ—‘ï¸ ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.render(<PCPartsSelector/>,document.getElementById('root'));
    </script>
</body>
</html>
